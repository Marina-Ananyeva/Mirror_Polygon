# Mirror Polygon (Зеркальный многоугольник)

Проект построения зеркального многоугольника и расчет траектории лучей, выходящих из произвольной точки внутри многоугольника по заданным параметрам.

# Использование

Имеется произвольный многоугольник. Внутри многоугольника выбрана произвольная точка, из которой в любом направлении может быть проведён луч. Достигнув стороны многоугольника, луч отражается. Достигнув следующей стороны, луч опять отражается и т.д.
Программа рассчитывает:

1. направление луча, при котором он отразится от каждой стороны многоугольника ровно по одному разу (если такое возможно);

2. направление луча, при котором он вернётся в исходную точку в том же направлении, в котором вышел;

3. направление луча, при котором он придет во вторую заданную точку при минимальном числе отражений (или без отражений).

Спроектированный многоугольник и лучи визуализируются.

# Входные данные

- Формат входных данных:

Данные могут вводиться пользователем интерактивно (с консоли) или через текстовый файл ("input.txt").

- Вводимые данные и требования:

1. Первая строка. Количество вершин многоугольника N (N >= 3).

2. Вторая строка. N пар координат вершин многоугольника по осям x и y  в порядке их следования через пробел. Координаты вводятся в формате вещественных чисел. Координаты пар вершин, образующих ребра многоугольника, не должны повторяться. У многоугольника не должно быть самопересечений.

3. Третья строка. Координаты начальной и конечной точек  через пробел. Координаты вводятся в формате вещественных чисел. Точки должны находиться внутри многоугольника.

- Валидация данных:

После считывания каждой строки производится проверка корректности данных. В случае ввода некорректных данных программа выведет сообщение с указанием какие данные некорректны. Пользователь может ввести эти данные повторно (при файловой загрузке требуется повторно считать данные из файла).

В случае успешной проверки всех данных пользователю предлагается запустить программу.

# Выходные данные:

1. Программа выведет в консоль или в текстовый файл ("output_result.txt") величину углов, указанных в п. 1 - 3 раздела "Использование", между лучом и горизонтальной осью координат (х), отсчитываемый в градусах против часовой стрелки, в формате вещественных чисел с точностью 3 знака после запятой.

2. Программа выполнит визуализацию результата в файл формата XML ("output_result.xml"). Просмотреть изображение можно, запустив файл в любом браузере. Одна единица плоскости координат равна одному пикселю графического файла.

3. Визуализируются:

- граница заданного многоугольника, начальная и конечная точки луча;
- ход луча до касания последней стороны многоугольника (по п. 1 раздела "Использование");
– ход луча до достижения начальной точки (по п. 2 раздела "Использование").
– ход луча до достижения заданной конечной точки (по п. 3 раздела "Использование").

# Алгоритмы (итоговая сложность O(N*logN))

- Используемые алгоритмы для валидации входных данных:

1. Предварительная подготовка многоугольника (поиск точек max, min по осям x и y). Сложность O(N).

2. Для проверки уникальности ребер многоугольника.

2. Для проверки самопересечения ребер многоугольника используется алгоритм Бентли-Оттмана (принцип заметающей прямой). Сложность алгоритма O(N*logN). Алгоритм позволяет за счет проведенной сортировки ребер, сравнивать не каждое с каждым ребром многоугольника, а только два ближайших, пересекающих в моменте заметающую прямую, постепенно сдвигая ее слева направо и исключая из очереди ребра, оставшиеся слева от прямой.

3. Для проверки нахождения начальной и конечной точки внутри многоугольника:
- Предварительная проверка Bounding Box (нахождение точки внутри прямоугольника, образованного минимальными и максимальными значениями вершин по осям x и y). Сложность O(1).
- Для определения выпуклости многоугольника - метод направления поворота ребер. Сложность алгоритма O(N).
- Для выпуклого многоугольника - методом бинарного поиска по углу. Сложность алгоритма O(logN).
- Для невыпуклого многоугольника - метод луча (с обработкой особых случаев - когда точка совпадает с вершиной или находится на ребре). Сложность алгоритма O(N).

- Используемые алгоритмы для построения лучей:
1.
2.
3. В случае отсутствия между точками ребер - вычисление угла наклона отрезка, соединяющего точки.

# Запуск программы:

Программа запускается из файла main.exe

# Системные требования:
1. С++17
2. GCC(MinGW-w64) 11.2.0

# Планы по доработке:
1. Добавить возможность считывания входных данных из файлов в формате JSON

2. Предусмотреть классы - наследники Треугольник (при N = 3) и Прямоугольник (при N = 4 и перпендикулярных ребрах многоугольника) для использования более простых формул расчета.

3. Добавить расчет различных метрик (минимальное расстояние между точками внутри многоугольника, между точкой и вершинами, между точкой и ребром и др.).

